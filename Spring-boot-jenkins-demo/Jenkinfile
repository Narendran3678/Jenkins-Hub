pipeline {
    agent any
    environment {
        userName="Narendran"
    }
    stages {
        stage("checkout") {
            steps {
                script {
                    def gitRepoUrl = "https://github.com/Narendran3678/Jenkins-Hub.git"
                    checkout([$class: 'GitSCM',
                        branches: [[name: '*/main']],
                        userRemoteConfigs: [[url: gitRepoUrl]],
                        extensions: [[$class: 'CleanBeforeCheckout'], [$class: 'CloneOption', noTags: false, shallow: true, depth: 1]]
                    ])
                }
            }
        }

        stage("Build") {
            steps {
                echo "Build Stage"
            }
        }

        stage("Test") {
            steps {
                echo "Test Stage"
            }
        }

        stage("Deploy") {
            steps {
                echo "Deploy Stage"
            }
        }
    }
    post {
        success {
            echo "Checkout Completed for User $userName"
        }
        failure {
            echo "Checkout Failed for User $userName"
        }
    }
}
